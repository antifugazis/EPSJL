{% extends "admin/base_admin.html" %}

{% block title %}Modifier Annonce - Administration{% endblock %}

{% block content %}
<div class="p-6 space-y-6">
    <!-- En-tête avec retour -->
    <div class="flex items-center gap-4">
        <a href="{{ url_for('admin.contenu', type='annonces') }}" 
           class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
            <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
        </a>
        <div>
            <h1 class="text-3xl font-bold text-gray-800">Modifier l'Annonce</h1>
            <p class="text-gray-600 mt-1">Modifiez les détails de l'annonce</p>
        </div>
    </div>

    <!-- Formulaire -->
    <div class="bg-white rounded-xl shadow-lg p-8 form-card">
        <form method="POST" action="{{ url_for('admin.modifier_annonce', id=annonce.id) }}" class="space-y-6">
            <!-- Titre -->
            <div>
                <label for="titre" class="block text-sm font-medium text-gray-700 mb-2">
                    Titre de l'annonce <span class="text-red-500">*</span>
                </label>
                <input type="text" id="titre" name="titre" required value="{{ annonce.titre }}"
                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all">
            </div>

            <!-- Contenu -->
            <div>
                <label for="contenu" class="block text-sm font-medium text-gray-700 mb-2">
                    Contenu de l'annonce <span class="text-red-500">*</span>
                </label>
                <textarea id="contenu" name="contenu" rows="8" required
                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all">{{ annonce.contenu }}</textarea>
            </div>

            <!-- Options -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Date d'expiration -->
                <div>
                    <label for="date_expiration" class="block text-sm font-medium text-gray-700 mb-2">
                        Date d'expiration (optionnel)
                    </label>
                    <input type="date" id="date_expiration" name="date_expiration"
                           value="{{ annonce.date_expiration.strftime('%Y-%m-%d') if annonce.date_expiration else '' }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all">
                    <p class="text-xs text-gray-500 mt-1">L'annonce sera automatiquement masquée après cette date</p>
                </div>
            </div>

            <!-- Checkboxes -->
            <div class="space-y-3">
                <div class="flex items-center">
                    <input type="checkbox" id="public" name="public" {% if annonce.public %}checked{% endif %}
                           class="w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500">
                    <label for="public" class="ml-3 text-sm font-medium text-gray-700">
                        Annonce publique (visible sur le site web)
                    </label>
                </div>

                <div class="flex items-center">
                    <input type="checkbox" id="important" name="important" {% if annonce.important %}checked{% endif %}
                           class="w-5 h-5 text-red-600 border-gray-300 rounded focus:ring-red-500">
                    <label for="important" class="ml-3 text-sm font-medium text-gray-700">
                        Marquer comme importante (affichage prioritaire)
                    </label>
                </div>
            </div>

            <!-- Boutons -->
            <div class="flex flex-col sm:flex-row gap-4 pt-4">
                <button type="submit"
                        class="w-full sm:flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all font-medium shadow-lg hover:shadow-xl transform hover:scale-105 text-center">
                    Enregistrer les modifications
                </button>
                <a href="{{ url_for('admin.contenu', type='annonces') }}"
                   class="w-full sm:w-auto px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium text-center">
                    Annuler
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
