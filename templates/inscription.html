{% extends "base.html" %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto">
        <!-- En-tête de la page -->
        <div class="text-center mb-12" data-aos="fade-up">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">Demande d'Inscription</h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Remplissez le formulaire ci-dessous pour faire une demande d'inscription à l'École Presbytérale Saint Joseph de L'Asile.
            </p>
            <div class="mt-4 text-sm text-gray-500">
                <p>Tous les champs marqués d'un astérisque (*) sont obligatoires.</p>
            </div>
        </div>

        <!-- Formulaire d'inscription -->
        <div class="bg-white py-8 px-6 shadow rounded-lg sm:px-10">
            <form id="inscriptionForm" class="mb-0 space-y-8" action="{{ url_for('inscriptions.formulaire') }}" method="POST" enctype="multipart/form-data">
                
                <!-- PARTIE A - INFORMATION SUR L'ÉLÈVE -->
                <div class="border-b pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">PARTIE A - INFORMATION SUR L'ÉLÈVE</h3>
                    <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                        <div class="sm:col-span-3">
                            <label for="eleve_nom" class="block text-sm font-medium text-gray-700">Nom *</label>
                            <input type="text" name="eleve_nom" id="eleve_nom" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="eleve_prenom" class="block text-sm font-medium text-gray-700">Prénom *</label>
                            <input type="text" name="eleve_prenom" id="eleve_prenom" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="eleve_sexe" class="block text-sm font-medium text-gray-700">Sexe *</label>
                            <select id="eleve_sexe" name="eleve_sexe" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                                <option value="">Sélectionnez</option>
                                <option value="Masculin">Masculin</option>
                                <option value="Féminin">Féminin</option>
                            </select>
                        </div>

                        <div class="sm:col-span-3">
                            <label for="eleve_date_naissance" class="block text-sm font-medium text-gray-700">Date de Naissance (J/M/A) *</label>
                            <input type="date" name="eleve_date_naissance" id="eleve_date_naissance" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="eleve_commune_naissance" class="block text-sm font-medium text-gray-700">Commune de Naissance *</label>
                            <input type="text" name="eleve_commune_naissance" id="eleve_commune_naissance" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="eleve_departement_naissance" class="block text-sm font-medium text-gray-700">Département de Naissance *</label>
                            <input type="text" name="eleve_departement_naissance" id="eleve_departement_naissance" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-6">
                            <label for="eleve_lieu_naissance" class="block text-sm font-medium text-gray-700">Lieu de naissance *</label>
                            <input type="text" name="eleve_lieu_naissance" id="eleve_lieu_naissance" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="eleve_handicape" class="block text-sm font-medium text-gray-700">Handicapé *</label>
                            <select id="eleve_handicape" name="eleve_handicape" required onchange="toggleHandicapType(this)"
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                                <option value="">Sélectionnez</option>
                                <option value="Non">Non</option>
                                <option value="Oui">Oui</option>
                            </select>
                        </div>

                        <div class="sm:col-span-3" id="handicap-type-container" style="display: none;">
                            <label for="eleve_type_handicape" class="block text-sm font-medium text-gray-700">Type d'handicap</label>
                            <select id="eleve_type_handicape" name="eleve_type_handicape"
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                                <option value="">Sélectionnez</option>
                                <option value="Moteur">Moteur</option>
                                <option value="Sensoriel">Sensoriel</option>
                                <option value="Cognitif">Cognitif</option>
                                <option value="Psychique">Psychique</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- PARTIE B - ADRESSE DE L'ÉLÈVE -->
                <div class="border-b pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">PARTIE B - ADRESSE DE L'ÉLÈVE</h3>
                    <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                        <div class="sm:col-span-6">
                            <label for="eleve_adresse" class="block text-sm font-medium text-gray-700">Adresse *</label>
                            <input type="text" name="eleve_adresse" id="eleve_adresse" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="eleve_departement" class="block text-sm font-medium text-gray-700">Département *</label>
                            <input type="text" name="eleve_departement" id="eleve_departement" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="eleve_commune" class="block text-sm font-medium text-gray-700">Commune *</label>
                            <input type="text" name="eleve_commune" id="eleve_commune" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-6">
                            <label for="eleve_section" class="block text-sm font-medium text-gray-700">Section communale/Ville/Quartier *</label>
                            <input type="text" name="eleve_section" id="eleve_section" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>
                    </div>
                </div>

                <!-- PARTIE C - INFORMATION SUR LA MÈRE -->
                <div class="border-b pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">PARTIE C - INFORMATION SUR LA MÈRE DE L'ÉLÈVE</h3>
                    <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                        <div class="sm:col-span-3">
                            <label for="mere_nom" class="block text-sm font-medium text-gray-700">Nom *</label>
                            <input type="text" name="mere_nom" id="mere_nom" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="mere_prenom" class="block text-sm font-medium text-gray-700">Prénom *</label>
                            <input type="text" name="mere_prenom" id="mere_prenom" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="mere_statut" class="block text-sm font-medium text-gray-700">Statut *</label>
                            <select id="mere_statut" name="mere_statut" required onchange="toggleMereOccupation(this)"
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                                <option value="">Sélectionnez</option>
                                <option value="Vivante">Vivante</option>
                                <option value="Décédée">Décédée</option>
                            </select>
                        </div>

                        <div class="sm:col-span-3" id="mere-occupation-container" style="display: none;">
                            <label for="mere_occupation" class="block text-sm font-medium text-gray-700">Occupation</label>
                            <select id="mere_occupation" name="mere_occupation"
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                                <option value="">Sélectionnez</option>
                                <option value="Administration publique">Administration publique</option>
                                <option value="Secteur Privé">Secteur Privé</option>
                                <option value="Secteur informel">Secteur informel</option>
                                <option value="Entrepreneur indépendant">Entrepreneur indépendant</option>
                                <option value="Cultivateur">Cultivateur</option>
                                <option value="Ouvrier agricole">Ouvrier agricole</option>
                                <option value="Technicien">Technicien</option>
                                <option value="Cadre">Cadre</option>
                                <option value="Autre">Autre (À préciser)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- PARTIE D - INFORMATION SUR LE PÈRE -->
                <div class="border-b pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">PARTIE D - INFORMATION SUR LE PÈRE DE L'ÉLÈVE</h3>
                    <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                        <div class="sm:col-span-3">
                            <label for="pere_nom" class="block text-sm font-medium text-gray-700">Nom *</label>
                            <input type="text" name="pere_nom" id="pere_nom" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="pere_prenom" class="block text-sm font-medium text-gray-700">Prénom *</label>
                            <input type="text" name="pere_prenom" id="pere_prenom" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="pere_statut" class="block text-sm font-medium text-gray-700">Statut *</label>
                            <select id="pere_statut" name="pere_statut" required onchange="togglePereOccupation(this)"
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                                <option value="">Sélectionnez</option>
                                <option value="Vivant">Vivant</option>
                                <option value="Décédé">Décédé</option>
                            </select>
                        </div>

                        <div class="sm:col-span-3" id="pere-occupation-container" style="display: none;">
                            <label for="pere_occupation" class="block text-sm font-medium text-gray-700">Occupation</label>
                            <select id="pere_occupation" name="pere_occupation"
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                                <option value="">Sélectionnez</option>
                                <option value="Administration publique">Administration publique</option>
                                <option value="Secteur Privé">Secteur Privé</option>
                                <option value="Secteur informel">Secteur informel</option>
                                <option value="Entrepreneur indépendant">Entrepreneur indépendant</option>
                                <option value="Cultivateur">Cultivateur</option>
                                <option value="Ouvrier agricole">Ouvrier agricole</option>
                                <option value="Technicien">Technicien</option>
                                <option value="Cadre">Cadre</option>
                                <option value="Autre">Autre (À préciser)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- PARTIE E - INFORMATION SUR LA PERSONNE RESPONSABLE -->
                <div class="border-b pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">PARTIE E - INFORMATION SUR LA PERSONNE RESPONSABLE DE L'ÉLÈVE</h3>
                    <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                        <div class="sm:col-span-3">
                            <label for="responsable_nom" class="block text-sm font-medium text-gray-700">Nom *</label>
                            <input type="text" name="responsable_nom" id="responsable_nom" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="responsable_prenom" class="block text-sm font-medium text-gray-700">Prénom *</label>
                            <input type="text" name="responsable_prenom" id="responsable_prenom" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="responsable_lien" class="block text-sm font-medium text-gray-700">Lien de parenté *</label>
                            <select id="responsable_lien" name="responsable_lien" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                                <option value="">Sélectionnez</option>
                                <option value="Père">Père</option>
                                <option value="Mère">Mère</option>
                                <option value="Cousin">Cousin</option>
                                <option value="Tante">Tante</option>
                                <option value="Oncle">Oncle</option>
                                <option value="Frère">Frère</option>
                                <option value="Sœur">Sœur</option>
                                <option value="Autre">Autre (préciser)</option>
                            </select>
                        </div>

                        <div class="sm:col-span-3">
                            <label for="responsable_nif" class="block text-sm font-medium text-gray-700">NIF</label>
                            <input type="text" name="responsable_nif" id="responsable_nif"
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="responsable_ninu" class="block text-sm font-medium text-gray-700">NINU</label>
                            <input type="text" name="responsable_ninu" id="responsable_ninu"
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="responsable_email" class="block text-sm font-medium text-gray-700">Adresse E-mail *</label>
                            <input type="email" name="responsable_email" id="responsable_email" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="responsable_telephone" class="block text-sm font-medium text-gray-700">Téléphone *</label>
                            <input type="tel" name="responsable_telephone" id="responsable_telephone" required
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md"
                                placeholder="+509 XXXX-XXXX">
                        </div>

                        <div class="sm:col-span-3">
                            <label for="responsable_telephone_additionnel" class="block text-sm font-medium text-gray-700">Téléphone additionnel</label>
                            <input type="tel" name="responsable_telephone_additionnel" id="responsable_telephone_additionnel"
                                class="mt-1 py-3 px-4 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border border-gray-300 rounded-md"
                                placeholder="+509 XXXX-XXXX">
                        </div>
                    </div>
                </div>

                <!-- Documents à fournir -->
                <div class="border-b pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Documents requis</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Acte de naissance</label>
                            <input type="file" name="acte_naissance" id="acte_naissance" accept=".pdf,.jpg,.jpeg,.png"
                                class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                            <p class="mt-1 text-xs text-gray-500">Format PDF, JPG ou PNG. Taille maximale: 5MB.</p>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700">Photo d'identité</label>
                            <input type="file" name="photo_identite" id="photo_identite" accept="image/*"
                                class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                            <p class="mt-1 text-xs text-gray-500">Format JPG ou PNG. Taille maximale: 2MB.</p>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700">Bulletins scolaires (si disponibles)</label>
                            <input type="file" name="bulletins_notes" id="bulletins" accept=".pdf,.jpg,.jpeg,.png" multiple
                                class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                            <p class="mt-1 text-xs text-gray-500">Vous pouvez sélectionner plusieurs fichiers.</p>
                        </div>
                    </div>
                </div>

                <!-- PARTIE F - PAIEMENT DES FRAIS D'INSCRIPTION -->
                <div class="border-b pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">PARTIE F - PAIEMENT DES FRAIS D'INSCRIPTION</h3>

                    <!-- Informations sur les frais -->
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <div class="ml-3">
                                <h3 class="text-sm font-medium text-blue-800">Frais d'inscription</h3>
                                <div class="mt-2 text-sm text-blue-700">
                                    <p><strong>Montant :</strong> 500 Gourdes</p>
                                    <p class="mt-1"><strong>Instructions de paiement :</strong></p>
                                    <p class="mt-1">Les frais d'inscription doivent être déposés sur le compte KPLAN de l'école via le numéro de compte <strong>3575</strong>.</p>
                                    <p class="mt-2 text-xs">⚠️ Important : Conservez votre reçu de paiement car il sera nécessaire pour finaliser votre inscription.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Upload du reçu de paiement -->
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Reçu de paiement *</label>
                            <input type="file" name="recu_paiement" id="recu_paiement" accept=".pdf,.jpg,.jpeg,.png" required
                                class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100">
                            <p class="mt-1 text-xs text-gray-500">Format PDF, JPG ou PNG. Téléchargez votre reçu de paiement de 500 Gourdes. Taille maximale: 5MB.</p>
                            <p class="mt-2 text-xs text-red-600">* Champ obligatoire - Vous devez fournir le reçu de paiement pour que votre demande soit traitée.</p>
                        </div>
                    </div>
                </div>

                <!-- Note et confirmation -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <p class="text-sm text-gray-700 mb-4"><strong>N.B :</strong> Les champs marqués d'un astérisque (*) sont obligatoires.</p>
                    <div class="flex items-start">
                        <div class="flex items-center h-5">
                            <input id="confirmation" name="confirmation" type="checkbox" required
                                class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                        </div>
                        <div class="ml-3 text-sm">
                            <label for="confirmation" class="font-medium text-gray-700">Je certifie que les informations fournies sont exactes et complètes. *</label>
                            <p class="text-gray-500">En cochant cette case, vous acceptez les conditions d'admission de l'école.</p>
                        </div>
                    </div>
                   
                </div>

                <!-- Bouton de soumission -->
                <div class="pt-5">
                    <button type="submit"
                        class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-[#00AEEF] hover:bg-[#0098d1] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#00AEEF]">
                        Soumettre la demande d'inscription
                    </button>
                </div>
            </form>
        </div>

        <!-- Informations supplémentaires -->
        <div class="mt-8 text-center text-sm text-gray-500">
            <p>Pour toute question ou assistance, n'hésitez pas à <a href="{{ url_for('contact') }}" class="font-medium text-[#00AEEF] hover:text-[#0098d1]">nous contacter</a>.</p>
            <p class="mt-2">Téléphone: <span class="font-medium">+509 4892-3158</span> | Email: <span class="font-medium">saintjopresbyterale@gmail.com</span></p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialisation des animations AOS
        AOS.init({
            duration: 800,
            once: true
        });
    });

    function toggleHandicapType(select) {
        const container = document.getElementById('handicap-type-container');
        const typeSelect = document.getElementById('eleve_type_handicape');
        if (select.value === 'Oui') {
            container.style.display = 'block';
            typeSelect.required = true;
        } else {
            container.style.display = 'none';
            typeSelect.required = false;
            typeSelect.value = '';
        }
    }

    function toggleMereOccupation(select) {
        const container = document.getElementById('mere-occupation-container');
        const occupationSelect = document.getElementById('mere_occupation');
        if (select.value === 'Vivante') {
            container.style.display = 'block';
            occupationSelect.required = true;
        } else {
            container.style.display = 'none';
            occupationSelect.required = false;
            occupationSelect.value = '';
        }
    }

    function togglePereOccupation(select) {
        const container = document.getElementById('pere-occupation-container');
        const occupationSelect = document.getElementById('pere_occupation');
        if (select.value === 'Vivant') {
            container.style.display = 'block';
            occupationSelect.required = true;
        } else {
            container.style.display = 'none';
            occupationSelect.required = false;
            occupationSelect.value = '';
        }
    }
</script>
{% endblock %}
