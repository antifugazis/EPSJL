<html lang="en">
   <head>
   
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="icon" href="/static/assets/logo.jpg" type="image/jpeg">
      <title>{% block title %}École Presbytérale Saint Joseph de L'Asile (EPSJA){% endblock %}</title>
      <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
      <!-- AOS Animation -->
      <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
      <!-- Alpine.js for better dropdown handling -->
      <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
      <!-- Google Fonts -->
      <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
      <style>
      /* Custom animations */
      [data-aos="custom-float"] {
         opacity: 0;
         transform: translateY(20px);
         transition-property: transform, opacity;
      }
      [data-aos="custom-float"].aos-animate {
         opacity: 1;
         transform: translateY(0);
      }
      
      /* Staggered animations for lists */
      [data-aos^="stagger"][data-aos^="stagger"] {
         opacity: 0;
         transition-property: opacity, transform;
      }
      
      [data-aos="stagger-up"].aos-animate,
      [data-aos="stagger-down"].aos-animate,
      [data-aos="stagger-left"].aos-animate,
      [data-aos="stagger-right"].aos-animate {
         opacity: 1;
         transform: translate(0);
      }
        body {
          font-family: 'Poppins', sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
          font-family: 'Montserrat', sans-serif;
        }
        .hero-title {
          font-family: 'Playfair Display', serif;
          font-weight: 800;
        }
        .gradient-bg {
          background: #00AEEF;
        }
        .card-hover {
          transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .btn-primary {
          background: #00AEEF;
          transition: all 0.3s ease;
        }
        .btn-primary:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .section-title {
          position: relative;
          display: inline-block;
          margin-bottom: 1.5rem;
        }
        .section-title:after {
          content: '';
          position: absolute;
          width: 50%;
          height: 4px;
          bottom: -10px;
          left: 0;
          background: #00AEEF;
          border-radius: 2px;
        }
      </style>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
   </head>
   <body>
      <!-- Loading Animation -->
      <div id="loader" class="fixed inset-0 bg-white z-[100] flex items-center justify-center">
         <div class="animate-pulse flex flex-col items-center">
            <img src="/static/assets/logo.jpg" alt="École Presbytérale Saint Joseph de L'Asile" class="h-24 w-24 rounded-full mb-4">
            <div class="h-2 bg-gray-200 rounded-full w-48 mb-2.5"></div>
            <div class="h-2 bg-gray-200 rounded-full w-36"></div>
         </div>
      </div>
      
      <div id="root" class="overflow-y-hidden">
         <!-- Dynamic Announcement Ticker -->
         {% if annonces and annonces|length > 0 %}
         <div class="ticker-wrap w-full">
            <div class="ticker container mx-auto">
               <div class="ticker-track" id="ticker-track">
                  {% for annonce in annonces %}
                  <div class="ticker-item">
                     <a href="{{ url_for('communication.details_annonce', annonce_id=annonce.id) }}" class="ticker-link">
                        {% if annonce.important is defined and annonce.important %}
                        <span class="ticker-icon important">
                           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                              <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                           </svg>
                        </span>
                        {% else %}
                        <span class="ticker-icon">
                           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                              <path fill-rule="evenodd" d="M18 3a1 1 0 00-1.447-.894L8.763 6H5a3 3 0 000 6h.28l1.771 5.316A1 1 0 008 18h1a1 1 0 001-1v-4.382l6.553 3.276A1 1 0 0018 15V3z" clip-rule="evenodd" />
                           </svg>
                        </span>
                        {% endif %}
                        <span class="ticker-title">{{ annonce.titre }}</span>
                        <span class="ticker-date">{{ annonce.date_creation.strftime('%d/%m/%Y') }}</span>
                     </a>
                  </div>
                  {% endfor %}
               </div>
            </div>
         </div>
      
         <style>
         .ticker-wrap {
            position: relative;
            background: #00AEEF;
            color: white;
            padding: 8px 0;
            overflow: hidden;
            margin: 0;
            z-index: 40;
         }
         
         .ticker {
            position: relative;
            width: 100%;
            overflow: hidden;
            padding: 0 8px;
         }
         
         .ticker-track {
            display: flex;
            position: relative;
            white-space: nowrap;
         }
         
         .ticker-item {
            flex-shrink: 0;
            padding: 0 20px;
         }
         
         .ticker-link {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 4px;
            color: white;
            text-decoration: none;
            transition: all 0.2s ease;
         }
         
         .ticker-link:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-1px);
         }
         
         .ticker-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            margin-right: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
         }
         
         .ticker-icon svg {
            width: 14px;
            height: 14px;
            color: white;
         }
         
         .ticker-icon.important {
            background: #ff6b6b;
         }
         
         .ticker-icon.important svg {
            color: white;
         }
         
         .ticker-title {
            font-weight: 500;
            margin-right: 8px;
         }
         
         .ticker-date {
            font-size: 0.8rem;
            opacity: 0.8;
         }
         
         @media (max-width: 768px) {
            .ticker-link {
               padding: 3px 8px;
            }
            
            .ticker-title {
               font-size: 0.85rem;
            }
            
            .ticker-date {
               font-size: 0.7rem;
            }
            
            .ticker-icon {
               width: 18px;
               height: 18px;
            }
            
            .ticker-icon svg {
               width: 12px;
               height: 12px;
            }
         }
         </style>
         
         <script>
         document.addEventListener('DOMContentLoaded', function() {
            // Make sure GSAP is loaded
            if (typeof gsap === 'undefined') {
               console.error('GSAP not loaded');
               return;
            }
            
            const track = document.getElementById('ticker-track');
            const tickerWrap = document.querySelector('.ticker-wrap');
            if (!track || !tickerWrap) {
               console.error('Ticker elements not found');
               return;
            }
         
            const items = Array.from(track.children);
            if (items.length <= 1) {
               console.log('Not enough items to animate ticker');
               return; // No need to animate if there's only one or zero items
            }
            
            // Clone all original items for seamless scrolling
            items.forEach(item => {
               const clone = item.cloneNode(true);
               track.appendChild(clone);
            });
            
            // Calculate the width of the original set of items
            const originalSetWidth = track.scrollWidth / 2;
            
            // Set animation speed based on content length
            // Adjust the divisor to change speed (higher = slower)
            const duration = Math.max(15, originalSetWidth / 80);
            
            // Create the animation
            function createAnimation() {
               // Clear any existing animation
               if (window.tickerAnimation) {
                  window.tickerAnimation.kill();
               }
               
               // Reset position
               gsap.set(track, { x: 0 });
               
               // Create new animation
               window.tickerAnimation = gsap.to(track, {
                  x: -originalSetWidth,
                  duration: duration,
                  ease: "none",
                  repeat: -1,
                  onRepeat: () => {
                     // Jump back to start when repeating (creates seamless loop)
                     gsap.set(track, { x: 0 });
                  }
               });
               
               return window.tickerAnimation;
            }
            
            // Initialize animation
            const tween = createAnimation();
            
            // Pause on hover
            tickerWrap.addEventListener('mouseenter', () => tween.pause());
            tickerWrap.addEventListener('mouseleave', () => tween.play());
            
            // Handle window resize
            window.addEventListener('resize', () => {
               // Recreate animation on window resize
               createAnimation();
            });
         });
         </script>
         {% endif %}
         
         <header class="sticky top-0 z-50 w-full bg-white/90 backdrop-blur-md shadow-sm zindex-1000">
            <div class="container mx-auto px-4">
               <div class="flex h-20 items-center justify-between">
                     <div class="flex items-center flex-shrink-0">
                        <a href="#" class="flex items-center">
                           <img src="/static/assets/logo.jpg" alt="École Presbytérale Saint Joseph de L'Asile" class="h-10 w-10 rounded-full flex-shrink-0">
                           <div class="ml-3">
                              <h1 class="text-sm font-bold text-black md:text-base whitespace-nowrap">École Presbytérale</h1>
                              <p class="text-xs text-[#00AEEF] md:text-sm whitespace-nowrap">Saint Joseph de L'Asile</p>
                           </div>
                        </a>
                     </div>
                     <nav class="hidden lg:flex lg:items-center lg:space-x-4">
                       <a href="{{ url_for('accueil') }}" class="text-sm font-medium text-black hover:text-[#00AEEF]">Accueil</a>
                       <a href="{{ url_for('programmes') }}" class="text-sm font-medium text-black hover:text-[#00AEEF]">Programmes</a>
                       <a href="{{ url_for('admission') }}" class="text-sm font-medium text-black hover:text-[#00AEEF]">Admission</a>
                       <a href="{{ url_for('evenements') }}" class="text-sm font-medium text-black hover:text-[#00AEEF]">Actualités</a>
                       
                       <!-- Dropdown for additional links -->
                       <div class="relative" x-data="{ open: false }">
                           <button @click="open = !open" @click.away="open = false" class="flex items-center text-sm font-medium text-black hover:text-[#00AEEF] focus:outline-none focus:text-[#00AEEF]">
                               Plus
                               <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1 transition-transform duration-200" :class="{ 'rotate-180': open }" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                   <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                               </svg>
                           </button>
                           <div x-show="open" x-transition:enter="transition ease-out duration-100" x-transition:enter-start="opacity-0 transform scale-95" x-transition:enter-end="opacity-100 transform scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="opacity-100 transform scale-100" x-transition:leave-end="opacity-0 transform scale-95" class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                               <a href="{{ url_for('contact') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Contact</a>
                               <a href="{{ url_for('payment') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Paiement</a>
                               <a href="{{ url_for('inscriptions.formulaire') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Inscription</a>
                           </div>
                       </div>
                       
                       {% if session.get('user_id') %}
                           <div class="relative" x-data="{ open: false }">
                               <button @click="open = !open" @click.away="open = false" class="flex items-center text-sm font-medium text-black hover:text-[#00AEEF] focus:outline-none focus:text-[#00AEEF]">
                                   {{ session.get('user_name', 'Utilisateur') }}
                                   <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1 transition-transform duration-200" :class="{ 'rotate-180': open }" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                   </svg>
                               </button>
                               <div x-show="open" x-transition:enter="transition ease-out duration-100" x-transition:enter-start="opacity-0 transform scale-95" x-transition:enter-end="opacity-100 transform scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="opacity-100 transform scale-100" x-transition:leave-end="opacity-0 transform scale-95" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                                   {% if session.get('user_role') in ['admin', 'directeur'] %}
                                       <a href="{{ url_for('admin.dashboard') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Dashboard Admin</a>
                                   {% endif %}
                                   <div class="border-t border-gray-100 my-1"></div>
                                   <a href="{{ url_for('auth.logout') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Déconnexion</a>
                               </div>
                           </div>
                       {% else %}
                           <a href="{{ url_for('auth.login') }}" class="text-sm font-medium text-black hover:text-[#00AEEF]">Connexion</a>
                       {% endif %}
                       </nav>
                     <div class="flex lg:hidden">
                        <button type="button" id="mobile-menu-button" class="inline-flex items-center justify-center rounded-md p-2 text-black hover:bg-[#00AEEF]/10">
                           <span class="sr-only">Open main menu</span>
                           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu block h-6 w-6" aria-hidden="true">
                              <line x1="4" x2="20" y1="12" y2="12"></line>
                              <line x1="4" x2="20" y1="6" y2="6"></line>
                              <line x1="4" x2="20" y1="18" y2="18"></line>
                           </svg>
                        </button>
                     </div>
                  </div>
               </div>
                              <!-- Mobile menu, show/hide based on menu state -->
                <div id="mobile-menu" class="hidden lg:hidden bg-gradient-to-br from-white to-gray-50 shadow-2xl rounded-b-2xl overflow-hidden max-h-[85vh] overflow-y-auto">
                    <div class="p-4">
                        <!-- Main Navigation Links -->
                        <div class="space-y-1 mb-4">
                            <a href="{{ url_for('accueil') }}" class="block px-4 py-3 text-sm font-medium text-gray-800 hover:bg-[#00AEEF] hover:text-white rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                    </svg>
                                    Accueil
                                </div>
                            </a>
                            
                            <a href="{{ url_for('programmes') }}" class="block px-4 py-3 text-sm font-medium text-gray-800 hover:bg-[#00AEEF] hover:text-white rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                    </svg>
                                    Programmes
                                </div>
                            </a>
                            <a href="{{ url_for('admission') }}" class="block px-4 py-3 text-sm font-medium text-gray-800 hover:bg-[#00AEEF] hover:text-white rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    Admission
                                </div>
                            </a>
                            <a href="{{ url_for('evenements') }}" class="block px-4 py-3 text-sm font-medium text-gray-800 hover:bg-[#00AEEF] hover:text-white rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                                    </svg>
                                    Actualités
                                </div>
                            </a>
                            <a href="{{ url_for('contact') }}" class="block px-4 py-3 text-sm font-medium text-gray-800 hover:bg-[#00AEEF] hover:text-white rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                    </svg>
                                    Contact
                                </div>
                            </a>
                            <a href="{{ url_for('payment') }}" class="block px-4 py-3 text-sm font-medium text-gray-800 hover:bg-[#00AEEF] hover:text-white rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                    </svg>
                                    Paiement
                                </div>
                            </a>
                            <a href="{{ url_for('inscriptions.formulaire') }}" class="block px-4 py-3 text-sm font-medium text-gray-800 hover:bg-[#00AEEF] hover:text-white rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-md">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                    Inscription
                                </div>
                            </a>
                        </div>
                        
                        {% if session.get('user_id') %}
                            <div class="border-t border-gray-300 my-3"></div>
                            
                            <!-- Admin Links -->
                            {% if session.get('user_role') in ['admin', 'directeur', 'professeur'] %}
                                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-3 mb-3">
                                    <p class="px-2 py-1 text-xs font-bold text-gray-600 uppercase tracking-wider mb-2">Administration</p>
                                    <div class="space-y-1">
                                        <a href="{{ url_for('admin.dashboard') }}" class="block px-4 py-3 text-sm font-medium text-gray-800 hover:bg-white hover:shadow-md rounded-lg transition-all duration-200">
                                            <div class="flex items-center">
                                                <svg class="w-5 h-5 mr-3 text-[#00AEEF]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                                </svg>
                                                Dashboard Admin
                                            </div>
                                        </a>
                                        <a href="{{ url_for('auth.logout') }}" class="block px-4 py-3 text-sm font-medium text-red-600 hover:bg-red-50 hover:shadow-md rounded-lg transition-all duration-200">
                                            <div class="flex items-center">
                                                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                                                </svg>
                                                Déconnexion
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            {% endif %}
                            
                        {% else %}
                            <div class="border-t border-gray-300 my-3 pt-3">
                                <a href="{{ url_for('auth.login') }}" class="block px-4 py-3 text-sm font-medium text-white bg-[#00AEEF] hover:bg-[#0098d1] rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-lg text-center">
                                    <div class="flex items-center justify-center">
                                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
                                        </svg>
                                        Connexion
                                    </div>
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </header>
            
            <!-- Flash Messages -->
            <div class="container mx-auto">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="{{ 'bg-green-100 border-green-500 text-green-700' if category == 'success' else 'bg-red-100 border-red-500 text-red-700' }} px-4 py-3 rounded relative border mb-4" role="alert">
                                <span class="block sm:inline">{{ message }}</span>
                                <button type="button" class="absolute top-0 bottom-0 right-0 px-4 py-3" onclick="this.parentElement.style.display='none'">
                                    <svg class="fill-current h-6 w-6 {{ 'text-green-500' if category == 'success' else 'text-red-500' }}" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
                                </button>
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </div>
            
            {% block content %}
            {% endblock %}
            <footer class="bg-black text-white">
               <div class="container mx-auto px-4 py-12 sm:px-6 lg:px-8">
                  <div class="grid grid-cols-1 gap-8 md:grid-cols-4">
                     <div class="md:col-span-1">
                        <div class="flex items-center">
                           <a href="#" class="flex items-center">
                              <img src="/static/assets/logo.jpg" alt="École Presbytérale Saint Joseph de L'Asile" class="h-10 w-10 rounded-full" data-aos="fade-right">
                              <div class="ml-3">
                                 <h2 class="text-sm font-bold text-white md:text-base">École Presbytérale</h2>
                                 <p class="text-xs text-[#00AEEF] md:text-sm">Saint Joseph de L'Asile</p>
                              </div>
                           </a>
                        </div>
                        <p class="mt-4 text-sm text-gray-300">Une éducation de qualité fondée sur des valeurs chrétiennes et l'excellence académique.</p>
                     </div>
                     <div>
                        <h3 class="text-base font-medium text-white">Liens Rapides</h3>
                        <ul class="mt-4 space-y-2">
                           <li><a href="{{ url_for('programmes') }}" class="text-sm text-gray-300 hover:text-[#00AEEF]">Programmes</a></li>
                           <li><a href="{{ url_for('evenements') }}" class="text-sm text-gray-300 hover:text-[#00AEEF]">Actualités</a></li>
                           <li><a href="{{ url_for('contact') }}" class="text-sm text-gray-300 hover:text-[#00AEEF]">Contact</a></li>
                        </ul>
                     </div>
                     <div>
                        <h3 class="text-base font-medium text-white">Inscription & Admissions</h3>
                        <ul class="mt-4 space-y-2">
                           <li><a href="{{ url_for('inscriptions.formulaire') }}" class="text-sm text-gray-300 hover:text-[#00AEEF]">Nous rejoindre</a></li>
                           <li><a href="{{ url_for('admission') }}" class="text-sm text-gray-300 hover:text-[#00AEEF]">Demandes d'admission</a></li>
                        </ul>
                     </div>
                     <div>
                        <h3 class="text-base font-medium text-white">Contact</h3>
                        <ul class="mt-4 space-y-2">
                           <li class="flex items-start">
                              <svg class="mt-1 h-5 w-5 text-[#00AEEF]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                              </svg>
                              <span class="ml-2 text-sm text-gray-300">Rue Calvaire #1, Centre-ville, l'Asile, NIPPES, Haïti</span>
                           </li>
                           <li class="flex items-start">
                              <svg class="mt-1 h-5 w-5 text-[#00AEEF]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                              </svg>
                              <span class="ml-2 text-sm text-gray-300">Code postal HT 7540</span>
                           </li>
                           <li class="flex items-start">
                              <svg class="mt-1 h-5 w-5 text-[#00AEEF]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                              </svg>
                              <span class="ml-2 text-sm text-gray-300">+509 4892-3158</span>
                           </li>
                           <li class="flex items-start">
                              <svg class="mt-1 h-5 w-5 text-[#00AEEF]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                              </svg>
                              <span class="ml-2 text-sm text-gray-300">saintjopresbyterale@gmail.com</span>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="mt-8 border-t border-gray-800 pt-8">
                     <div class="mb-8">
                        <h3 class="text-base font-medium text-white mb-4">Newsletter</h3>
                        <p class="text-sm text-gray-300 mb-4">Inscrivez-vous à notre newsletter pour recevoir les dernières actualités de l'école</p>
                        <form id="newsletter-form" class="flex flex-col sm:flex-row gap-2">
                           <input type="email" name="email" placeholder="Votre adresse email" required class="px-4 py-2 rounded-md bg-gray-800 text-white border border-gray-700 focus:outline-none focus:ring-2 focus:ring-[#00AEEF] flex-grow">
                           <button type="submit" class="px-4 py-2 bg-[#00AEEF] text-white rounded-md hover:bg-[#0098d1] transition-colors">S'inscrire</button>
                        </form>
                        <div id="newsletter-message" class="mt-2 text-sm hidden"></div>
                     </div>
                     <p class="text-center text-sm text-gray-400">© 2025 École Presbytérale Saint Joseph de L'Asile. Tous droits réservés. 
                        <a href="{{ url_for('credits') }}" class="text-[#00AEEF] hover:underline ml-2">Crédits</a>
                     </p>
                  </div>
                  
                  <script>
                     document.getElementById('newsletter-form').addEventListener('submit', function(e) {
                        e.preventDefault();
                        const form = this;
                        const email = form.querySelector('input[type="email"]').value;
                        const messageDiv = document.getElementById('newsletter-message');
                        const submitBtn = form.querySelector('button[type="submit"]');
                        
                        // Disable submit button
                        submitBtn.disabled = true;
                        submitBtn.textContent = 'Inscription...';
                        
                        // Send to backend
                        fetch('{{ url_for("newsletter_subscribe") }}', {
                           method: 'POST',
                           headers: {
                              'Content-Type': 'application/x-www-form-urlencoded',
                           },
                           body: 'email=' + encodeURIComponent(email)
                        })
                        .then(response => response.json())
                        .then(data => {
                           messageDiv.classList.remove('hidden');
                           if (data.success) {
                              messageDiv.className = 'mt-2 text-sm text-green-400';
                              messageDiv.textContent = data.message;
                              form.reset();
                           } else {
                              messageDiv.className = 'mt-2 text-sm text-red-400';
                              messageDiv.textContent = data.message;
                           }
                        })
                        .catch(error => {
                           messageDiv.classList.remove('hidden');
                           messageDiv.className = 'mt-2 text-sm text-red-400';
                           messageDiv.textContent = 'Une erreur est survenue. Veuillez réessayer.';
                        })
                        .finally(() => {
                           submitBtn.disabled = false;
                           submitBtn.textContent = 'S\'inscrire';
                           setTimeout(() => {
                              messageDiv.classList.add('hidden');
                           }, 5000);
                        });
                     });
                  </script>
               </div>
            </footer>
         
      </div>
      
      
      <!-- Initialize AOS and GSAP -->
      <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
      <script>
         // Hide loader when page is loaded
         window.addEventListener('load', function() {
            document.getElementById('loader').style.display = 'none';
            
            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            
            if (mobileMenuButton && mobileMenu) {
               mobileMenuButton.addEventListener('click', function() {
                  mobileMenu.classList.toggle('hidden');
               });
            }
            
            // Initialize AOS
            AOS.init({
               duration: 800,
               easing: 'ease-out-quad',
               once: true,
               mirror: false,
               offset: 100,
               delay: 100
            });
            
            // Add data-aos attributes dynamically to all cards and sections
            const features = document.querySelectorAll('.feature-card');
            features.forEach((card, index) => {
               card.setAttribute('data-aos', 'fade-up');
               card.setAttribute('data-aos-delay', (index * 100) + 'ms');
            });
            
            const teamMembers = document.querySelectorAll('.team-member');
            teamMembers.forEach((member, index) => {
               member.setAttribute('data-aos', 'zoom-in');
               member.setAttribute('data-aos-delay', (index * 150) + 'ms');
            });
            
            const galleryItems = document.querySelectorAll('.gallery-item');
            galleryItems.forEach((item, index) => {
               item.setAttribute('data-aos', 'flip-left');
               item.setAttribute('data-aos-delay', (index % 3 * 100) + 'ms');
            });
            
            const testimonials = document.querySelectorAll('.testimonial');
            testimonials.forEach((testimonial, index) => {
               testimonial.setAttribute('data-aos', index % 2 === 0 ? 'fade-right' : 'fade-left');
               testimonial.setAttribute('data-aos-delay', (index * 200) + 'ms');
            });
            
            const stats = document.querySelectorAll('.stat-item');
            stats.forEach((stat, index) => {
               stat.setAttribute('data-aos', 'zoom-in');
               stat.setAttribute('data-aos-delay', (index * 100) + 'ms');
            });
            
            // GSAP Animations
            gsap.registerPlugin(ScrollTrigger);
            
            // Hero section animation
            gsap.from('.hero-title', {
               y: 50,
               opacity: 0,
               duration: 1,
               stagger: 0.2
            });
            
            // Animate features on scroll
            gsap.utils.toArray('.feature-card').forEach((card, i) => {
               gsap.from(card, {
                  scrollTrigger: {
                     trigger: card,
                     start: 'top 80%',
                     toggleActions: 'play none none none'
                  },
                  y: 50,
                  opacity: 0,
                  duration: 0.8,
                  delay: i * 0.1
               });
            });
            
            // Parallax effect for hero image
            gsap.to('.hero-image', {
               scrollTrigger: {
                  trigger: '.hero-section',
                  start: 'top bottom',
                  end: 'bottom top',
                  scrub: true
               },
               y: 100,
               ease: 'none'
            });
         });
      </script>
   <script>
   // Load news ticker items dynamically
   document.addEventListener('DOMContentLoaded', function() {
      const newsTicker = document.getElementById('news-ticker-content');
      if (newsTicker) {
         fetch('/api/news')
            .then(response => response.json())
            .then(data => {
               if (data && data.length > 0) {
                  newsTicker.innerHTML = '';
                  data.forEach(item => {
                     const span = document.createElement('span');
                     span.className = 'mr-8';
                     span.textContent = item.content;
                     newsTicker.appendChild(span);
                  });
               } else {
                  newsTicker.innerHTML = '<span class="mr-8">Aucune actualité disponible</span>';
               }
            })
            .catch(error => {
               console.error('Erreur lors du chargement des actualités:', error);
               newsTicker.innerHTML = '<span class="mr-8">Erreur de chargement des actualités</span>';
            });
      }
   });
   </script>
   </body>
</html>
